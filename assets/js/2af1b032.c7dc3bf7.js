"use strict";(self.webpackChunkmirage_docs=self.webpackChunkmirage_docs||[]).push([[3492],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},24595:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const o={sidebar_position:2},i="Getting Started",l={unversionedId:"general/getting-started",id:"general/getting-started",title:"Getting Started",description:"This document describes the steps to creating a multiplayer game with Mirage. The process described here is a simplified, higher-level version of the actual process for a real game; it doesn\u2019t always work exactly like this, but it provides a basic recipe for the process.",source:"@site/docs/general/getting-started.md",sourceDirName:"general",slug:"/general/getting-started",permalink:"/Mirage/docs/general/getting-started",draft:!1,editUrl:"https://github.com/MirageNet/Mirage/tree/master/doc/docs/general/getting-started.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docs",previous:{title:"Overview",permalink:"/Mirage/docs/general/overview"},next:{title:"Sockets",permalink:"/Mirage/docs/general/sockets"}},s={},p=[{value:"Video Tutorials",id:"video-tutorials",level:2},{value:"Networking Set-Up",id:"networking-set-up",level:2},{value:"Player Prefab",id:"player-prefab",level:2},{value:"Player Movements",id:"player-movements",level:2},{value:"Basic Player Game State",id:"basic-player-game-state",level:2},{value:"Remote Actions",id:"remote-actions",level:2},{value:"Non-player game objects",id:"non-player-game-objects",level:2},{value:"Spawners",id:"spawners",level:2},{value:"Spawn positions for players",id:"spawn-positions-for-players",level:2}],c={toc:p};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"getting-started"},"Getting Started"),(0,a.kt)("p",null,"This document describes the steps to creating a multiplayer game with Mirage. The process described here is a simplified, higher-level version of the actual process for a real game; it doesn\u2019t always work exactly like this, but it provides a basic recipe for the process."),(0,a.kt)("h2",{id:"video-tutorials"},"Video Tutorials"),(0,a.kt)("p",null,"Currently, there are no Mirage-specific videos. You can use Mirror's existing videos alongside our ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/mirror-migration"},"Mirror to Mirage Conversion")," guide."),(0,a.kt)("h2",{id:"networking-set-up"},"Networking Set-Up"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Right click in the Scene, select ",(0,a.kt)("em",{parentName:"li"},"Network")," \u2192 ",(0,a.kt)("em",{parentName:"li"},"NetworkManager"),". This will create a new GameObject with all the necessary networking components set up for you."),(0,a.kt)("li",{parentName:"ul"},"Add the NetworkManagerHUD component to the game object. This provides an out-of-the-box canvas UI system that you can use and create your own UI. Assign the variables to properly set up the UI so everything will interact with network code. In the future, we will be providing out-of-the-box UI that auto sets up.")),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"/docs/components/network-manager"},"Using the NetworkManager"),"."),(0,a.kt)("h2",{id:"player-prefab"},"Player Prefab"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create a new prefab in your project."),(0,a.kt)("li",{parentName:"ul"},"Add a NetworkIdentity component to the player prefab"),(0,a.kt)("li",{parentName:"ul"},"Set the ",(0,a.kt)("inlineCode",{parentName:"li"},"playerPrefab")," field on the ",(0,a.kt)("inlineCode",{parentName:"li"},"CharacterSpawner")," component to the player prefab. You can find this component on the GameObject you created in the first setup.")),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/game-objects/spawn-player"},"character objects")," for more information."),(0,a.kt)("h2",{id:"player-movements"},"Player Movements"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Attach the correct type of movement script you intended to use. NetworkTransform will move the transform component without physics calculations. If you\nrequire physics to be also part of your normal movement calculations suggestion would be to attach a NetworkRigidBody component instead.")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Currently network transform and network rigid body components cannot handle various lag and drop of packets. Jitter or lag behind may occur. We are working\nto improve these components and have better lag and jitter control in the future."),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"Add the correct movement component you require."),(0,a.kt)("li",{parentName:"ul"},"Check box client authority under the component if you want the player to be able to fully control movement without the server controlling it."))),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"If client authority is checked then hacking can occur due to trusting clients and accepting their movement. if you do not want this do not check client authority under the component and you will require to send commands to the server to allow movement to occur."),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"Update input and control scripts to reflect what type of control you want. See below for different examples."))),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you require a camera to run on player prefab subscribe to ",(0,a.kt)("inlineCode",{parentName:"p"},"Identity.OnStartLocalPlayer")," event to take control of the Main Camera in the scene for the player. You do not need a camera on every player prefab.")),(0,a.kt)("p",null,"For example, if client authority has been checked and you trust clients. Never trust clients though."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"using UnityEngine;\nusing Mirage;\n\npublic class Controls : NetworkBehaviour\n{\n    void Update()\n    {\n        if (!IsLocalPlayer)\n        {\n            // exit from update if this is not the local player\n            return;\n        }\n\n        // handle player input for movement\n    }\n}\n")),(0,a.kt)("p",null,"For example, if server authority is going to be used."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"using UnityEngine;\nusing Mirage;\n\npublic class Controls : NetworkBehaviour\n{\n    void Update()\n    {\n        if (!IsLocalPlayer)\n        {\n            // exit from update if this is not the local player\n            return;\n        }\n\n        // handle player input for movement\n\n       // You would call this command after handling input or you can send inputs directly to\n       // server and let server buffer inputs up and do movements based on the buffered inputs.\n       MovePlayer();\n    }\n\n    [ServerRpc]\n    void MovePlayer()\n    {\n        // We are now firing off some kind of movement all done by server.\n    }\n}\n")),(0,a.kt)("h2",{id:"basic-player-game-state"},"Basic Player Game State"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Make scripts that contain important data into NetworkBehaviours instead of MonoBehaviours"),(0,a.kt)("li",{parentName:"ul"},"You can sync different types of data depending on what you need to sync.")),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/sync/"},"State Synchronization"),"."),(0,a.kt)("h2",{id:"remote-actions"},"Remote Actions"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Make scripts that perform important actions into NetworkBehaviours instead of MonoBehaviours"),(0,a.kt)("li",{parentName:"ul"},"Update functions that perform important player actions to have an attribute of ",(0,a.kt)("inlineCode",{parentName:"li"},"[ServerRpc]"))),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/remote-actions/"},"Remote Actions"),"."),(0,a.kt)("h2",{id:"non-player-game-objects"},"Non-player game objects"),(0,a.kt)("p",null,"Fix non-player prefabs such as enemies:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Add the ",(0,a.kt)("inlineCode",{parentName:"li"},"NetworkIdentify")," component"),(0,a.kt)("li",{parentName:"ul"},"Add the correct component needed to sync movement as the state above with player movement."),(0,a.kt)("li",{parentName:"ul"},"Once all objects have a network identity. Find ClientObjectManager under the ",(0,a.kt)("inlineCode",{parentName:"li"},"NetworkManager")," game object in the scene and hit register prefabs."),(0,a.kt)("li",{parentName:"ul"},"Update scripts with game state and actions")),(0,a.kt)("h2",{id:"spawners"},"Spawners"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Potentially change spawner scripts to be NetworkBehaviours"),(0,a.kt)("li",{parentName:"ul"},"Modify spawners to only run on the server (use ",(0,a.kt)("inlineCode",{parentName:"li"},"IsServer")," property or the ",(0,a.kt)("inlineCode",{parentName:"li"},"OnStartServer")," callback)"),(0,a.kt)("li",{parentName:"ul"},"Call ",(0,a.kt)("inlineCode",{parentName:"li"},"ServerObjectManager.Spawn()")," for created game objects")),(0,a.kt)("h2",{id:"spawn-positions-for-players"},"Spawn positions for players"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Add a new game object and place it at the player's start location"),(0,a.kt)("li",{parentName:"ul"},"Add this GameObject to the ",(0,a.kt)("inlineCode",{parentName:"li"},"CharacterSpawner"),"'s ",(0,a.kt)("inlineCode",{parentName:"li"},"Positions")," list.")))}u.isMDXComponent=!0}}]);